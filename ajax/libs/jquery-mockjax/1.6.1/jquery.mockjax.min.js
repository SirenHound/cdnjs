!function(a){function h(b){void 0==window.DOMParser&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(a){var b=new ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b});try{var c=(new DOMParser).parseFromString(b,"text/xml");if(!a.isXMLDoc(c))throw new Error("Unable to parse XML");var d=a("parsererror",c);if(1==d.length)throw new Error("Error: "+a(c).text());return c}catch(e){var f=void 0==e.name?e:e.name+": "+e.message;return a(document).trigger("xmlParseError",[f]),void 0}}function i(b,c){var d=!0;return"string"==typeof c?a.isFunction(b.test)?b.test(c):b==c:(a.each(b,function(e){return void 0===c[e]?d=!1:("object"==typeof c[e]&&null!==c[e]?(d&&a.isArray(c[e])&&(d=a.isArray(b[e])&&c[e].length===b[e].length),d=d&&i(b[e],c[e])):d=b[e]&&a.isFunction(b[e].test)?d&&b[e].test(c[e]):d&&b[e]==c[e],void 0)}),d)}function j(b,c){return b[c]===a.mockjaxSettings[c]}function k(b,c){if(a.isFunction(b))return b(c);if(a.isFunction(b.url.test)){if(!b.url.test(c.url))return null}else{var d=b.url.indexOf("*");if(b.url!==c.url&&-1===d||!new RegExp(b.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(c.url))return null}return!b.data||c.data&&i(b.data,c.data)?b&&b.type&&b.type.toLowerCase()!=c.type.toLowerCase()?null:b:null}function l(b){if(a.isArray(b)){var c=b[0],d=b[1];return"number"==typeof c&&"number"==typeof d?Math.floor(Math.random()*(d-c))+c:null}return"number"==typeof b?b:null}function m(c,d,e){var f=function(b){return function(){return function(){this.status=c.status,this.statusText=c.statusText,this.readyState=1;var f=function(){this.readyState=4;var b;"json"==d.dataType&&"object"==typeof c.responseText?this.responseText=JSON.stringify(c.responseText):"xml"==d.dataType?"string"==typeof c.responseXML?(this.responseXML=h(c.responseXML),this.responseText=c.responseXML):this.responseXML=c.responseXML:"object"==typeof c.responseText&&null!==c.responseText?(c.contentType="application/json",this.responseText=JSON.stringify(c.responseText)):this.responseText=c.responseText,("number"==typeof c.status||"string"==typeof c.status)&&(this.status=c.status),"string"==typeof c.statusText&&(this.statusText=c.statusText),b=this.onreadystatechange||this.onload,a.isFunction(b)?(c.isTimeout&&(this.status=-1),b.call(this,c.isTimeout?"timeout":void 0)):c.isTimeout&&(this.status=-1)};if(a.isFunction(c.response)){if(2===c.response.length)return c.response(e,function(){f.call(b)}),void 0;c.response(e)}f.call(b)}.apply(b)}}(this);c.proxy?b({global:!1,url:c.proxy,type:c.proxyType,data:c.data,dataType:"script"===d.dataType?"text/plain":d.dataType,complete:function(a){c.responseXML=a.responseXML,c.responseText=a.responseText,j(c,"status")&&(c.status=a.status),j(c,"statusText")&&(c.statusText=a.statusText),this.responseTimer=setTimeout(f,l(c.responseTime)||0)}}):d.async===!1?f():this.responseTimer=setTimeout(f,l(c.responseTime)||50)}function n(b,c,d,e){return b=a.extend(!0,{},a.mockjaxSettings,b),"undefined"==typeof b.headers&&(b.headers={}),"undefined"==typeof c.headers&&(c.headers={}),b.contentType&&(b.headers["content-type"]=b.contentType),{status:b.status,statusText:b.statusText,readyState:1,open:function(){},send:function(){e.fired=!0,m.call(this,b,c,d)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(a,b){c.headers[a]=b},getResponseHeader:function(a){return b.headers&&b.headers[a]?b.headers[a]:"last-modified"==a.toLowerCase()?b.lastModified||(new Date).toString():"etag"==a.toLowerCase()?b.etag||"":"content-type"==a.toLowerCase()?b.contentType||"text/plain":void 0},getAllResponseHeaders:function(){var c="";return b.contentType&&(b.headers["Content-Type"]=b.contentType),a.each(b.headers,function(a,b){c+=a+": "+b+"\n"}),c}}}function o(a,b,c){if(p(a),a.dataType="json",a.data&&f.test(a.data)||f.test(a.url)){r(a,b,c);var d=/^(\w+:)?\/\/([^\/?#]+)/,e=d.exec(a.url),g=e&&(e[1]&&e[1]!==location.protocol||e[2]!==location.host);if(a.dataType="script","GET"===a.type.toUpperCase()&&g){var h=q(a,b,c);return h?h:!0}}return null}function p(a){"GET"===a.type.toUpperCase()?f.test(a.url)||(a.url+=(/\?/.test(a.url)?"&":"?")+(a.jsonp||"callback")+"=?"):a.data&&f.test(a.data)||(a.data=(a.data?a.data+"&":"")+(a.jsonp||"callback")+"=?")}function q(b,c,d){var e=d&&d.context||b,f=null;return c.response&&a.isFunction(c.response)?c.response(d):"object"==typeof c.responseText?a.globalEval("("+JSON.stringify(c.responseText)+")"):a.globalEval("("+c.responseText+")"),setTimeout(function(){s(b,e,c),t(b,e,c)},l(c.responseTime)||0),a.Deferred&&(f=new a.Deferred,"object"==typeof c.responseText?f.resolveWith(e,[c.responseText]):f.resolveWith(e,[a.parseJSON(c.responseText)])),f}function r(a,b,c){var d=c&&c.context||a,e=a.jsonpCallback||"jsonp"+g++;a.data&&(a.data=(a.data+"").replace(f,"="+e+"$1")),a.url=a.url.replace(f,"="+e+"$1"),window[e]=window[e]||function(c){data=c,s(a,d,b),t(a,d,b),window[e]=void 0;try{delete window[e]}catch(f){}head&&head.removeChild(script)}}function s(b,c,d){b.success&&b.success.call(c,d.responseText||"",status,{}),b.global&&(b.context?a(b.context):a.event).trigger("ajaxSuccess",[{},b])}function t(b,c){b.complete&&b.complete.call(c,{},status),b.global&&(b.context?a(b.context):a.event).trigger("ajaxComplete",[{},b]),b.global&&!--a.active&&a.event.trigger("ajaxStop")}function u(f,g){var h,i,j,l;"object"==typeof f?(g=f,f=void 0):(g=g||{},g.url=f),i=a.extend(!0,{},a.ajaxSettings,g),l=function(b,c){var d=g[b.toLowerCase()];return function(){a.isFunction(d)&&d.apply(this,[].slice.call(arguments)),c["onAfter"+b]()}};for(var m=0;m<c.length;m++)if(c[m]&&(j=k(c[m],i)))return d.push(i),a.mockjaxSettings.log(j,i),i.dataType&&"JSONP"===i.dataType.toUpperCase()&&(h=o(i,j,g))?h:(j.cache=i.cache,j.timeout=i.timeout,j.global=i.global,j.isTimeout&&(j.responseTime>1?g.timeout=j.responseTime-1:(j.responseTime=2,g.timeout=1),j.isTimeout=!1),a.isFunction(j.onAfterSuccess)&&(g.success=l("Success",j)),a.isFunction(j.onAfterError)&&(g.error=l("Error",j)),a.isFunction(j.onAfterComplete)&&(g.complete=l("Complete",j)),v(j,g),function(c,d,e,f){h=b.call(a,a.extend(!0,{},e,{xhr:function(){return n(c,d,e,f)}}))}(j,i,g,c[m]),h);if(e.push(g),a.mockjaxSettings.throwUnmocked===!0)throw new Error("AJAX not mocked: "+g.url);return b.apply(a,[g])}function v(a,b){if(a.url instanceof RegExp&&a.hasOwnProperty("urlParams")){var c=a.url.exec(b.url);if(1!==c.length){c.shift();var d=0,e=c.length,f=a.urlParams.length,g=Math.min(e,f),h={};for(d;g>d;d++){var i=a.urlParams[d];h[i]=c[d]}b.urlParams=h}}}var b=a.ajax,c=[],d=[],e=[],f=/=\?(&|$)/,g=(new Date).getTime();a.extend({ajax:u}),a.mockjaxSettings={log:function(b,c){if(b.logging!==!1&&("undefined"!=typeof b.logging||a.mockjaxSettings.logging!==!1)&&window.console&&console.log){var d="MOCK "+c.type.toUpperCase()+": "+c.url,e=a.extend({},c);if("function"==typeof console.log)console.log(d,e);else try{console.log(d+" "+JSON.stringify(e))}catch(f){console.log(d)}}},logging:!0,status:200,statusText:"OK",responseTime:500,isTimeout:!1,throwUnmocked:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}},a.mockjax=function(a){var b=c.length;return c[b]=a,b},a.mockjax.clear=function(a){1==arguments.length?c[a]=null:c=[],d=[],e=[]},a.mockjaxClear=function(){window.console&&window.console.warn&&window.console.warn("DEPRECATED: The $.mockjaxClear() method has been deprecated in 1.6.0. Please use $.mockjax.clear() as the older function will be removed soon!"),a.mockjax.clear()},a.mockjax.handler=function(a){return 1==arguments.length?c[a]:void 0},a.mockjax.mockedAjaxCalls=function(){return d},a.mockjax.unfiredHandlers=function(){for(var a=[],b=0,d=c.length;d>b;b++){var e=c[b];null===e||e.fired||a.push(e)}return a},a.mockjax.unmockedAjaxCalls=function(){return e}}(jQuery);
